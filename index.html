<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ğŸ’œë°ì¼ë¦¬ íƒ€ì´í•‘ğŸ’œ</title>
<link href="https://fonts.googleapis.com/css2?family=Gowun+Batang&display=swap" rel="stylesheet">
<style>
body {
  margin: 0;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  background: #fdebeb;
  font-family: 'Gowun Batang', serif;
}

.container {
  text-align: center;
  width: 700px;
}

.categories {
  margin-bottom: 14px;
}

.categories button {
  margin: 0 6px;
  padding: 6px 14px;
  border-radius: 20px;
  border: none;
  cursor: pointer;
  background: #ecbecd;
  color: #923e59;
  font-family: 'Gowun Batang', serif;
  transition: 0.3s;
}

.categories button.active {
  background: #ae97c1;
  color: white;
}

.title {
  font-size: 22px;
  color: #ae97c1;
  margin-bottom: 22px;
  letter-spacing: 2px;
}

.sentence {
  font-size: 26px;
  margin-bottom: 26px;
  color: #e180c4;
  transition: opacity 0.4s ease;
  white-space: nowrap;
  min-height: 40px;
}

.fade-out { opacity: 0; }
.correct { color: #869bc9; }
.incorrect { color: #ea7594; }

input {
  width: 520px;
  padding: 14px 18px;
  font-size: 25px;
  border-radius: 16px;
  border: none;
  outline: none;
  text-align: center;
  background: #ecbecd;
  color: #923e59;
  font-family: 'Gowun Batang', serif;
}

.navigation-hints {
  margin-top: 25px;
}

.nav-buttons {
  margin-bottom: 10px;
}

.nav-buttons button {
  margin: 0 5px;
  padding: 8px 16px;
  border-radius: 12px;
  border: 1px solid #ae97c1;
  background: transparent;
  color: #ae97c1;
  cursor: pointer;
  font-family: 'Gowun Batang', serif;
  transition: 0.3s;
}

.stats-container {
  display: flex;
  justify-content: center;
  align-items: baseline;
  gap: 40px;
  margin-top: 25px;
}

.stat-item {
  font-size: 19px;
  font-weight: normal; /* ë³¼ë“œ í•´ì œ */
  color: #e180c4; 
}

.stat-value {
  font-size: 22px;
  font-weight: normal; /* ë³¼ë“œ í•´ì œ */
  display: inline-block;
  min-width: 40px;
  text-align: left;
  margin-left: 5px;
  transition: color 0.2s;
}

.sparkle {
  filter: drop-shadow(0 0 6px rgba(255,255,255,0.9));
  animation: pulse 0.5s infinite alternate;
  display: inline-block;
}

@keyframes pulse {
  from { transform: scale(1); }
  to { transform: scale(1.1); }
}

.shortcut-guide {
  font-size: 14px;
  color: #c36081;
  margin: 0;
  opacity: 0.8;
}

.shortcut-guide span {
  background: #ecbecd;
  padding: 2px 6px;
  border-radius: 4px;
  font-weight: bold;
}
</style>
</head>

<body>
<div class="container">
  <div class="categories">
    <button class="active" data-type="anime">ë§Œí™”</button>
    <button data-type="movie">ì˜í™”</button>
    <button data-type="drama">ë“œë¼ë§ˆ</button>
  </div>

  <div class="title">ì˜¤ëŠ˜ì˜ ë¬¸ì¥</div>
  <div class="sentence" id="sentence"></div>
  <input id="input" placeholder="ì—¬ê¸°ì— ê·¸ëŒ€ë¡œ ì³ë³´ì„¸ìš”" autocomplete="off">

  <div class="navigation-hints">
    <div class="nav-buttons">
      <button id="prevBtn">ì´ì „ ë¬¸ì¥</button>
      <button id="nextBtn">ë‹¤ìŒ ë¬¸ì¥</button>
    </div>
    <p class="shortcut-guide">íŒ: ë‹¨ì¶•í‚¤ <span>Alt + â† / â†’</span> ë¥¼ ì´ìš©í•´ ë³´ì„¸ìš”!</p>
  </div>

  <div class="stats-container">
    <div class="stat-item">íƒ€ìˆ˜ <span id="speed" class="stat-value">0</span></div>
    <div class="stat-item">ì •í™•ë„ <span id="accuracy" class="stat-value">100</span>%</div>
  </div>
</div>

<script>
const data = {
  anime: [
    "ì •ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ë„ ìš©ì„œí•˜ì§€ ì•Šê² ë‹¤!", "ì£¼ë‹˜, ì˜¤ëŠ˜ë„ ì •ì˜ë¡œìš´ ë„ë‘‘ì´ ë˜ëŠ” ê±¸ í—ˆë½í•´ì£¼ì„¸ìš”.",
    "ì°¾ì•„ë¼ ë¹„ë°€ì˜ ì—´ì‡ , ë¯¸ë¡œê°™ì´ ì–½íŒ ëª¨í—˜ë“¤.", "ë°¤í•˜ëŠ˜ ì € ë©€ë¦¬ì„œ ë¹›ë‚˜ê³  ìˆëŠ” ê¿ˆê²°ê°™ì€ ìš°ë¦¬ì˜ ì‚¬ë‘",
    "ì „ì„¤ ì†ì—ì„œ ì´ë£¨ì§€ ëª»í•œ ì‚¬ë‘, ê·¸ ì•½ì† ì§€í‚¤ëŸ¬ ë„Œ ì˜¨ê±°ì•¼", "ì ì´ì œ ì‹œì‘ì´ì•¼, ë‚´ ê¿ˆì„ ìœ„í•œ ì—¬í–‰~ í”¼ì¹´ì¸„",
    "ë‚´ ì–´ë¦° ì‹œì ˆ ìš°ì—°íˆ ë“¤ì—ˆë˜ ë¯¿ì§€ ëª»í•  í•œë§ˆë””", "ì°¾ì•„ë¼ ë“œë˜ê³¤ë³¼ ì„¸ìƒì—ì„œ ì œì¼ ì‹ ë¹„ë¡œìš´ ë¹„ë°€",
    "ë§ˆì§€ë§‰ì— ì›ƒê¸° ìœ„í•´ ìš°ë¦¬ë“¤ì˜ ì˜¤ëŠ˜ì„ ê¸°êº¼ì´ ì´ê²¨ë‚´ê°€ì", "ê·¸ë‘ì£  ê·¸ë‘ì£  ë§ˆë²•ìœ¼ë¡œ ë¹›ë‚˜ëŠ” ê·¸ë‘ì£ ",
    "ì•„ì¹¨ í•´ê°€ ë¹›ë‚˜ëŠ” ëì´ ì—†ëŠ” ë°”ë‹·ê°€", "ë„ˆëŠ” í•  ìˆ˜ ìˆì–´, ì„¸ê³„ì˜ í”¼êµ¬ì™•, í†µí‚¤ íŒŒì´íŒ… í”¼êµ¬ì™•ì™•ì™•",
    "ëœ¨ê±°ìš´ ì½”íŠ¸ë¥¼ ê°€ë¥´ë©° ë„ˆì—ê²Œ ê°€ê³  ìˆì–´", "ë§Œë‚  ìˆ˜ ì—†ì–´ ë§Œë‚˜ê³  ì‹¶ì€ë° ê·¸ëŸ° ìŠ¬í”ˆ ê¸°ë¶„ì¸ê±¸"
  ],
  movie: ["ì¸ìƒì€ ì›ë˜ ê³„íšëŒ€ë¡œ ì•ˆ ë¼.", "ì™„ë²½í•œ ì‚¬ëŒì€ ì—†ë‹¤.", "ì‹¤ìˆ˜ ì¢€ í•˜ë©´ ì–´ë•Œ.", "í–‰ë³µì€ ëŒ€ì¶© ì‚´ì•„ë„ ì˜¨ë‹¤.", "ë¬»ê³  ë”ë¸”ë¡œ ê°€!", "ë‹ˆê°€ ê°€ë¼, í•˜ì™€ì´."],
  drama: ["ëˆ„êµ¬ì˜ ì¸ìƒì´ê±´ ì‹ ì´ ë¨¸ë¬¼ë‹¤ ê°€ëŠ” ìˆœê°„ì´ ìˆë‹¤.", "ì¢‹ì•„í•˜ëŠ” ë° ì´ìœ ê°€ ì–´ë”¨ì–´", "ë‚˜ëŠ” ë„ˆë‘ ìˆìœ¼ë©´ ë‚˜ë‹µë‹¤.", "ì„¤ë ˆëŠ” ê±´ ëŠ˜ ì‚¬ì†Œí•œ ê±°ì•¼."]
};

let currentType = "anime";
let currentSentence = "";
let startTime = null;
let history = []; 
let historyIndex = -1;

const sentenceEl = document.getElementById("sentence");
const input = document.getElementById("input");
const speedEl = document.getElementById("speed");
const accuracyEl = document.getElementById("accuracy");
const prevBtn = document.getElementById("prevBtn");
const nextBtn = document.getElementById("nextBtn");

function getSpeedColor(speed) {
  if (speed < 100) return "#869bc9"; // 0~99
  if (speed < 200) return "#8fbc93"; // 100~199
  if (speed < 300) return "#ffb347"; // 200~299
  if (speed < 400) return "#ff6f6f"; // 300~399
  if (speed < 500) return "#ae97c1"; // 400~499
  if (speed < 600) return "#e180c4"; // 500~599
  if (speed < 700) return "#f4a6c1"; // 600~699
  if (speed < 800) return "#b39ddb"; // 700~799
  if (speed < 900) return "#6fa8dc"; // 800~899
  if (speed < 1000) return "#bcdffb"; // 900~999
  return "#d4af37"; // 1000 ì´ìƒ (ê³¨ë“œí†¤)
}

function newSentence() {
  const list = data[currentType];
  const picked = list[Math.floor(Math.random() * list.length)];
  history = history.slice(0, historyIndex + 1);
  history.push(picked);
  historyIndex++;
  displaySentence(picked);
}

function displaySentence(text) {
  sentenceEl.classList.add("fade-out");
  setTimeout(() => {
    currentSentence = text;
    sentenceEl.innerHTML = "";
    input.value = "";
    startTime = null;
    speedEl.textContent = "0";
    speedEl.style.color = getSpeedColor(0);
    accuracyEl.textContent = "100";
    speedEl.classList.remove("sparkle");
    [...currentSentence].forEach(char => {
      const span = document.createElement("span");
      span.textContent = char;
      sentenceEl.appendChild(span);
    });
    sentenceEl.classList.remove("fade-out");
    input.focus();
  }, 200);
}

input.addEventListener("input", () => {
  if (!input.value) {
    startTime = null;
    speedEl.textContent = "0";
    return;
  }
  if (!startTime) startTime = Date.now();

  const elapsedMinutes = (Date.now() - startTime) / 60000;
  const speed = Math.floor(input.value.length / elapsedMinutes) || 0;

  speedEl.textContent = speed;
  speedEl.style.color = getSpeedColor(speed);
  
  // 500íƒ€ ë„˜ì„ ë•Œ ë°˜ì§ì´ íš¨ê³¼ ë° ë³„ ì¶”ê°€
  if (speed >= 500) {
    speedEl.classList.add("sparkle");
    speedEl.innerHTML = `âœ¨ ${speed}`;
  } else {
    speedEl.classList.remove("sparkle");
    speedEl.textContent = speed;
  }

  const spans = sentenceEl.querySelectorAll("span");
  let correctChars = 0;
  spans.forEach((span, i) => {
    if (!input.value[i]) span.className = "";
    else if (input.value[i] === span.textContent) {
      span.className = "correct";
      correctChars++;
    } else span.className = "incorrect";
  });

  const accuracy = Math.floor((correctChars / input.value.length) * 100) || 0;
  accuracyEl.textContent = accuracy;
});

input.addEventListener("keydown", e => {
  // ì—”í„°ë‚˜ ìŠ¤í˜ì´ìŠ¤ë°”ë¥¼ ëˆŒë €ì„ ë•Œ
  if (e.key === "Enter" || e.key === " ") {
    // ë¬¸ì¥ ê¸¸ì´ë§Œí¼ íƒ€ì´í•‘í–ˆë‹¤ë©´ (í‹€ë ¸ì–´ë„ ìƒê´€ì—†ìŒ) ë‹¤ìŒ ë¬¸ì¥ìœ¼ë¡œ!
    if (input.value.length >= currentSentence.length) {
      e.preventDefault();
      newSentence();
    }
  }
  
  // ë‹¨ì¶•í‚¤ ë¡œì§
  if (e.key === "ArrowRight" && e.altKey) {
    e.preventDefault();
    if (historyIndex < history.length - 1) {
      historyIndex++;
      displaySentence(history[historyIndex]);
    } else newSentence();
  }
  if (e.key === "ArrowLeft" && e.altKey) {
    e.preventDefault();
    if (historyIndex > 0) {
      historyIndex--;
      displaySentence(history[historyIndex]);
    }
  }
});

prevBtn.addEventListener("click", () => { if (historyIndex > 0) { historyIndex--; displaySentence(history[historyIndex]); } });
nextBtn.addEventListener("click", () => { if (historyIndex < history.length - 1) { historyIndex++; displaySentence(history[historyIndex]); } else newSentence(); });

document.querySelectorAll(".categories button").forEach(btn => {
  btn.addEventListener("click", () => {
    document.querySelectorAll(".categories button").forEach(b => b.classList.remove("active"));
    btn.classList.add("active");
    currentType = btn.dataset.type;
    newSentence();
  });
});

window.onload = newSentence;
</script>
</body>
</html>
